<!DOCTYPE html>
<html lang="en">
<head>
  <base href="/">
  <meta charset="UTF-8">
  <title>Friend Finder</title>
  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>
    <body>
        <div class="container">

            <h1>This is the survey page!</h1>

            <h2>Name</h2>
            <input type="text" placeholder="required" id="name" class="form-control" required>

            <h2>Photo URL</h2>
            <input type="text" placeholder="required" id="photo" class="form-control" required>
            <hr>

            <h2>Q1</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q1" class="form-control" required>

            <h2>Q2</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q2" class="form-control" required>

            <h2>Q3</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q3" class="form-control" required>

            <h2>Q4</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q4" class="form-control" required>

            <h2>Q5</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q5" class="form-control" required>

            <h2>Q6</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q6" class="form-control" required>

            <h2>Q7</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q7" class="form-control" required>

            <h2>Q8</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q8" class="form-control" required>

            <h2>Q9</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q9" class="form-control" required>

            <h2>Q10</h2>
            <h3>Who's afraid of the big bad wolf?</h3>
            <input type="text" placeholder="1 - strongly disagree, 5 - strongly agree" id="q10" class="form-control" required>
            <hr>
            <!---<a href="/survey"> --> <button type="submit" class="btn btn-lg btn-primary" id="submit-survey">
            <span class="glyphicon glyphicon-heart"></span>Find my match!</button>
        </div>
        <!--------- JS code to be moved later ---------------->
        <script>

        $(document).ready(function(){
            console.log('js script loaded!');

            $("#submit-survey").click(function(){
                console.log(JSON.stringify($("#q10").val().trim()));
                var newScores = [
                    $("#q1").val().trim(),
                    $("#q2").val().trim(),
                    $("#q3").val().trim(),
                    $("#q4").val().trim(),
                    $("#q5").val().trim(),
                    $("#q6").val().trim(),
                    $("#q7").val().trim(),
                    $("#q8").val().trim(),
                    $("#q9").val().trim(),
                    $("#q10").val().trim()
                ];
                let newFakeFriend = {};
                JSON.stringify(newFakeFriend = {
                    name: $("#name").val().trim(),
                    photoURL: $("#photo").val(),
                    scores: newScores
                });
                
                console.log(newFakeFriend);
                
                var currentURL = window.location.origin;
                
                $.post(currentURL + "/api/friends", newFakeFriend, function(data){
                    console.log(data);

                    for (var i = 0; i < data.length; i++) {
                        sum += parseInt(data.scores[i]);
                        console.log('inside the loop');
                        console.log(sum);
                    }
                    // alert("Data: " + data + "\nStatus: " + status);
                });
            });
        });
        </script>
    </body>
</html>